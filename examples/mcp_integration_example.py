\"\"\"Example usage of MCP integration with agents.\"\"\"\n\nimport asyncio\nfrom pathlib import Path\nimport sys\n\n# Add src to path\nsys.path.insert(0, str(Path(__file__).parent.parent))\n\nfrom src.agents import (\n    EnhancedNetworkAnalyzerAgent,\n    EnhancedSocialFinderAgent,\n    EnhancedTechDetectorAgent,\n    get_agent_tool_integration,\n)\nfrom src.toolkits import get_toolkit_registry\nfrom src.config import get_logger\n\nlogger = get_logger(__name__)\n\n\nasync def example_1_toolkit_discovery():\n    \"\"\"Example 1: Discover available tools.\"\"\"\n    logger.info(\"=\" * 60)\n    logger.info(\"Example 1: Toolkit Discovery\")\n    logger.info(\"=\" * 60)\n\n    registry = get_toolkit_registry()\n\n    # List all toolkits\n    toolkits = registry.list_toolkits()\n    logger.info(f\"Available toolkits: {toolkits}\")\n\n    # Get all tools\n    all_tools = registry.get_all_tools()\n    for toolkit_name, tools in all_tools.items():\n        logger.info(f\"\\n{toolkit_name}:\")\n        for tool in tools:\n            logger.info(f\"  - {tool['name']}: {tool['description']}\")\n\n    # Get registry schema\n    schema = registry.get_registry_schema()\n    logger.info(f\"\\nTotal toolkits: {schema['total_toolkits']}\")\n    logger.info(f\"Total tools: {schema['total_tools']}\")\n\n\nasync def example_2_agent_tool_mapping():\n    \"\"\"Example 2: Agent-tool mapping.\"\"\"\n    logger.info(\"\\n\" + \"=\" * 60)\n    logger.info(\"Example 2: Agent-Tool Mapping\")\n    logger.info(\"=\" * 60)\n\n    integration = get_agent_tool_integration()\n\n    # Get tools for each agent\n    agents = [\n        \"NetworkAnalyzerAgent\",\n        \"SocialFinderAgent\",\n        \"TechDetectorAgent\",\n        \"GraphBuilderAgent\",\n    ]\n\n    for agent_name in agents:\n        tools = integration.get_agent_tools(agent_name)\n        logger.info(f\"\\n{agent_name}:\")\n        for tool in tools:\n            logger.info(f\"  - {tool}\")\n\n\nasync def example_3_network_analysis():\n    \"\"\"Example 3: Network analysis with tools.\"\"\"\n    logger.info(\"\\n\" + \"=\" * 60)\n    logger.info(\"Example 3: Network Analysis\")\n    logger.info(\"=\" * 60)\n\n    agent = EnhancedNetworkAnalyzerAgent()\n\n    # Analyze domain\n    logger.info(\"\\nAnalyzing domain: example.com\")\n    results = await agent.analyze_domain(\"example.com\")\n\n    logger.info(f\"DNS Enumeration: {results.get('dns_enumeration', {}).get('status')}\")\n    logger.info(f\"Typosquatting: {results.get('typosquatting', {}).get('status')}\")\n    logger.info(f\"Shodan Results: {results.get('shodan_results', {}).get('status')}\")\n\n    # Analyze IP\n    logger.info(\"\\nAnalyzing IP: 1.1.1.1\")\n    ip_results = await agent.analyze_ip(\"1.1.1.1\")\n    logger.info(f\"Shodan Lookup: {ip_results.get('shodan_lookup', {}).get('status')}\")\n\n\nasync def example_4_social_analysis():\n    \"\"\"Example 4: Social media analysis.\"\"\"\n    logger.info(\"\\n\" + \"=\" * 60)\n    logger.info(\"Example 4: Social Media Analysis\")\n    logger.info(\"=\" * 60)\n\n    agent = EnhancedSocialFinderAgent()\n\n    # Find company profiles\n    logger.info(\"\\nSearching for company profiles: Apple\")\n    results = await agent.find_company_profiles(\"Apple\")\n\n    logger.info(f\"LinkedIn: {results.get('linkedin', {}).get('status')}\")\n    logger.info(f\"Twitter: {results.get('twitter', {}).get('status')}\")\n    logger.info(f\"GitHub: {results.get('github', {}).get('status')}\")\n\n    # Find person profiles\n    logger.info(\"\\nSearching for person profiles: Steve Jobs\")\n    person_results = await agent.find_person_profiles(\"Steve Jobs\")\n\n    logger.info(f\"LinkedIn: {person_results.get('linkedin', {}).get('status')}\")\n    logger.info(f\"Twitter: {person_results.get('twitter', {}).get('status')}\")\n    logger.info(f\"GitHub: {person_results.get('github', {}).get('status')}\")\n\n\nasync def example_5_tech_analysis():\n    \"\"\"Example 5: Technology detection.\"\"\"\n    logger.info(\"\\n\" + \"=\" * 60)\n    logger.info(\"Example 5: Technology Detection\")\n    logger.info(\"=\" * 60)\n\n    agent = EnhancedTechDetectorAgent()\n\n    # Analyze company visual\n    logger.info(\"\\nAnalyzing company visual assets: Apple, apple.com\")\n    results = await agent.analyze_company_visual(\"Apple\", \"apple.com\")\n\n    logger.info(f\"Logos: {results.get('logos', {}).get('status')}\")\n    logger.info(f\"Screenshots: {results.get('screenshots', {}).get('status')}\")\n\n\nasync def example_6_direct_tool_execution():\n    \"\"\"Example 6: Direct tool execution.\"\"\"\n    logger.info(\"\\n\" + \"=\" * 60)\n    logger.info(\"Example 6: Direct Tool Execution\")\n    logger.info(\"=\" * 60)\n\n    registry = get_toolkit_registry()\n\n    # Execute Shodan search\n    logger.info(\"\\nExecuting Shodan search for 'apache'\")\n    result = await registry.execute_tool(\n        toolkit_name=\"NetworkToolkit\",\n        tool_name=\"shodan_search\",\n        query=\"apache\",\n        page=1,\n        limit=10,\n    )\n    logger.info(f\"Status: {result.get('status')}\")\n    logger.info(f\"Error: {result.get('error')}\")\n\n    # Execute DNS Twist\n    logger.info(\"\\nExecuting DNS Twist for 'example.com'\")\n    result = await registry.execute_tool(\n        toolkit_name=\"NetworkToolkit\",\n        tool_name=\"dns_twist_enumerate\",\n        domain=\"example.com\",\n        registered_only=True,\n        limit=50,\n    )\n    logger.info(f\"Status: {result.get('status')}\")\n    logger.info(f\"Error: {result.get('error')}\")\n\n    # Execute Twitter search\n    logger.info(\"\\nExecuting Twitter search for 'security'\")\n    result = await registry.execute_tool(\n        toolkit_name=\"SocialToolkit\",\n        tool_name=\"twitter_search\",\n        query=\"security\",\n        max_results=10,\n    )\n    logger.info(f\"Status: {result.get('status')}\")\n    logger.info(f\"Error: {result.get('error')}\")\n\n\nasync def example_7_agent_tool_integration():\n    \"\"\"Example 7: Agent-tool integration execution.\"\"\"\n    logger.info(\"\\n\" + \"=\" * 60)\n    logger.info(\"Example 7: Agent-Tool Integration Execution\")\n    logger.info(\"=\" * 60)\n\n    integration = get_agent_tool_integration()\n\n    # Execute tool through agent\n    logger.info(\"\\nExecuting tool through NetworkAnalyzerAgent\")\n    result = await integration.execute_agent_tool(\n        agent_name=\"NetworkAnalyzerAgent\",\n        tool_name=\"shodan_search\",\n        query=\"apache\",\n    )\n    logger.info(f\"Status: {result.get('status')}\")\n    logger.info(f\"Error: {result.get('error')}\")\n\n    # Validate input\n    logger.info(\"\\nValidating tool input\")\n    is_valid, error = await integration.validate_tool_input(\n        agent_name=\"NetworkAnalyzerAgent\",\n        tool_name=\"shodan_search\",\n        query=\"apache\",\n    )\n    logger.info(f\"Valid: {is_valid}\")\n    logger.info(f\"Error: {error}\")\n\n    # Get tool schemas\n    logger.info(\"\\nGetting tool schemas for NetworkAnalyzerAgent\")\n    schemas = integration.get_agent_tool_schemas(\"NetworkAnalyzerAgent\")\n    for schema in schemas:\n        logger.info(f\"  - {schema['name']}: {schema['description']}\")\n\n\nasync def main():\n    \"\"\"Run all examples.\"\"\"\n    logger.info(\"Starting MCP Integration Examples\")\n    logger.info(\"=\" * 60)\n\n    try:\n        # Run examples\n        await example_1_toolkit_discovery()\n        await example_2_agent_tool_mapping()\n        await example_3_network_analysis()\n        await example_4_social_analysis()\n        await example_5_tech_analysis()\n        await example_6_direct_tool_execution()\n        await example_7_agent_tool_integration()\n\n        logger.info(\"\\n\" + \"=\" * 60)\n        logger.info(\"All examples completed successfully!\")\n        logger.info(\"=\" * 60)\n\n    except Exception as e:\n        logger.error(f\"Example failed: {e}\", exc_info=True)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n"
